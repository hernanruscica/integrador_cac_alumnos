<%- include('partials/cabecera', {titulo: "Agenda Telefónica - Ingrese con cuenta",  estilos_ruta: "/"}) %>   
<!--HEADER TERMINA-->

    <!--MAIN COMIENZA-->
    <main class="">             
        <form class = "formulario" action="/autenticar" method="post">        
            <div class="contenedor">
                <h2 class="formulario__titulo">Ingrese con su usuario y contrasenia</h2>      
                <p>Si quiere probar la agenda con un usuario de prueba, ingrese con el [Usuario]: <strong>prueba</strong> [Contraseña]: <strong>1234</strong></p>                   
                <div class="formulario__fila">
                    <div class="formulario__fila__campo">
                        <label class = "formulario__campo__label" for="nombre">Usuario:</label>                        
                        <input class = "formulario__campo__input" type="text" name="nombre" id = "nombre" placeholder="Ingrese su nombre de usuario." required>
                        <label class = "formulario__campo__error formulario__campo__error-oculto">*No puede estar vacio</label>
                    </div>
                    <div class="formulario__fila__campo">
                        <label class = "formulario__campo__label" for="contrasenia">Contrasenia:</label>
                        <input class = "formulario__campo__input" type="password" name = "contrasenia" id = "contrasenia" placeholder="Ingrese su contrasenia." required>
                        <label class = "formulario__campo__error formulario__campo__error-oculto">*No puede estar vacio</label>
                    </div>
                </div>   
                <p>Olvido su contrasenia? <a href="/recuperar_pass">Recuperar contraseña</a></p>
                <p>Si todavia no esta registrado, puede <a href="/registrarse">registrarse aca!</a></p>
                <input class="formulario__campo__btn" type="submit" value="Ingresar">                              
               
            </div>
        </form>             
       
    </main>
    <!--MAIN TERMINA-->   

    <!--FOOTER COMIENZA-->
    
    <%- include('partials/piedepagina') %>        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
   
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>  

    <% if (mensaje == 'ingresocorrecto'){ %>
        <script>
            Swal.fire({
                title: 'Registro exitoso !',
                text: 'Registrado correctamente para usar la agenda. Ahora tiene que ingresar con ese usuario y contraseña',
                icon: 'success',
                confirmButtonText: 'Entendido'
        })
        </script>   
    <%
    } 
    if (mensaje == 'usuarioinexistente'){ %>
        <script>
            Swal.fire({
                title: 'Usuario inexistente',
                text: 'El usuario ingresado no esta registrado para usar la agenda. Intente nuevamente.',
                icon: 'error',
                confirmButtonText: 'Entendido'
        })
        </script>   
    <%
    } 
    if (mensaje == 'contraseniaerronea'){ %>
        <script>
            Swal.fire({
                title: 'Contraseña erronea',
                text: 'La contraseña ingresada es incorrecta. Intente nuevamente o puede restablecer la contraseña con la opción en esta misma página.',
                icon: 'error',
                confirmButtonText: 'Entendido'
        })
        </script>   
    <%
    }
    if (mensaje == 'errorbd') { %>
        <script>
            Swal.fire({
                title: 'Error de base de datos ',
                text: 'La consulta a la base de datos produjo un error.',
                icon: 'error',
                confirmButtonText: 'Entendido'
        })
        </script> 
    <%
    }
    %>
    
</body>
</html>